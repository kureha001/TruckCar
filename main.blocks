<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="*~ZXZs{oj!p9hJY=!cI`">安全確認の結果［危険］</variable><variable id="s|,T[cmU$e5@~~-FMKkO">安全確認の結果［安全］</variable><variable id="SqQ^~DeB8!jM:=v=S=Uw">センサー(道路用)の値(右)</variable><variable id="6gU6+!vaZ.=PZ]#3C!2}">センサー(道路用)_直進とみなす差の閾値</variable><variable id="%SfWmyEuDh=^e*7wB_2p">車の位置［道路より左］</variable><variable id="0Ao|I8nO,HrG2A-[g+^6">モーターの出力［速い］</variable><variable id="nduy0;5,VO@.U33ea=Yg">モーターの出力［遅い］</variable><variable id="JG_1q,3EPK?sCzbms1h|">車の位置</variable><variable id="1E#aS{rYQyVl-3AJ(p4%">車の位置［道路より右］</variable><variable id="Bzqa|RJ]r}poz]T!P;)-">車の位置［道路の中央］</variable><variable id="U8@cqp|.-uiLjv01M=Q`">状況</variable><variable id="){,=g4O_b,E/6W1l#Gn5">状況［走行可能］</variable><variable id="#`!JTjiU%rOZ+OjD@aYv">状況［走行禁止］</variable><variable id="EwyM(]@DOS8wG27MR2Jp">無線のグループ</variable><variable id="wov+|~m0MlzYfs.MB9d2">状況［店に到着］</variable><variable id="4^6G|j~duKYO2nuHLad{">状況［出発可能］</variable><variable id="5J11;}@/j?%vxAAW0^{T">センサー(衝突用)_危険とみなす距離</variable><variable id="dpGayXcc`vwc-]7TO).c">センサー(衝突用)の値</variable><variable id="f7A~k~YQv|L}}zVw0KN$">センサー(道路用)の値(左)</variable><variable id="~R6|`flZ%gwwI56EBeg2">車の向き［まっすぐ］</variable><variable id="|@7OAkdZ~q7AA,`_J}zk">車の向き［曲がっている］</variable><variable id="A7HxQSym8b9U#hi=.r8+">センサー(道路用)の値(差分)</variable></variables><block type="pxt-on-start" id="+.YW=-nmoC1$P!J|`|5#" x="-2761" y="-892"><comment pinned="false" h="94" w="368">最初に一度だけ発生イベントです。
準備は、車と運転者の2種類の機能を設けます。</comment><statement name="HANDLER"><block type="function_call" id="Vax])IGr,6i4L`4ApT1j"><mutation name="準備する(車用)" functionid="CG7/LC{k*Q}?UNIGImC{"></mutation><comment pinned="false" h="98" w="287">車用の準備です。
各種機器の調整を行います。</comment><next><block type="function_call" id="wHNvl[6.^=IbJNgRAT^1"><mutation name="準備する(運転手用)" functionid="v@y5uip}Hz]7_@bN4YYP"></mutation><comment pinned="false" h="83" w="470">運転手用の準備です。
運転手が運転で意識する事柄を整理します。</comment><next><block type="function_call" id="q*o17;!*bjw{2=7S_4W_"><mutation name="走行を開始する" functionid="[_h!xEIiJEc5.oAB|i2C"></mutation></block></next></block></next></block></statement></block><block type="radio_on_number_drag" id="*RhvEmL/4;t_WpPpjgi{" x="-720" y="-924"><comment pinned="false" h="127" w="461">同乗者から無線通知を受信したときに発生するイベントです。
・このイベントで、状況が"店に到着"に変わります。
・車を止め、見守りケータイに 到着を通知 をします。
以上は、一度だけ実行し2度はしません。
</comment><value name="HANDLER_DRAG_PARAM_receivedNumber"><shadow type="argument_reporter_number" id="Qu^-4d/V|u3evP9~Rt/U"><field name="VALUE">receivedNumber</field></shadow></value><statement name="HANDLER"><block type="kitronik_move_motor_stop" id="d;/Y@b@WOLfUOq-%TMi7"><next><block type="controls_if" id=".03p}+[[;5)P8oJ8Y6jK"><comment pinned="false" h="69" w="295">2度目は実行しないようにします。</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="URv4?/MyxJ!B5]`*tC2q"><field name="OP">NEQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="w|cC+MG[MD*uL6FC^Tb="><field name="VAR" id="U8@cqp|.-uiLjv01M=Q`">状況</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=",^L#zmFW(F1ElV=@zf]2"><field name="VAR" id="wov+|~m0MlzYfs.MB9d2">状況［店に到着］</field></block></value></block></value><statement name="DO0"><block type="kitronik_move_motor_stop" id="7]I3mgz4S8jk=j+nsF${"><next><block type="variables_set" id="@[PM0]KJUkNc_`CqmO?J"><field name="VAR" id="U8@cqp|.-uiLjv01M=Q`">状況</field><comment pinned="false" h="66" w="274">状況を "店に到着" に変更します。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="b6l1Fg9#K}{ivN%sxK;%"><field name="VAR" id="wov+|~m0MlzYfs.MB9d2">状況［店に到着］</field></block></value><next><block type="kitronik_move_motor_stop" id="R7R/6mEXSj)Fi30xqJk."><next><block type="device_pause" id="lrWe$1@V[PS6JPUrr^9C"><value name="pause"><shadow type="timePicker"><field name="ms">100</field></shadow><block type="math_arithmetic" id="6n}kf,%uvr8qlBPJwwX/"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" disabled="true"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="SBny.xnN$g2La+UxM*1?"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="J2p]*kqQyxj9/Veuw)6*"><field name="NUM">1000</field></shadow></value></block></value><next><block type="function_call" id="Xkr)-ZQB3Yxj$H*!~^2|"><mutation name="Ｕターンする" functionid="/{pU8QO$-05rjKna!:/!"></mutation></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block><block type="device_forever" id="/nhIiEM]C{{j{/-=91.?" x="-156" y="-897"><comment pinned="false" h="129" w="488">運転中、繰り返し発生するイベントです。
・店に到着するまで、繰り返し行われます。
・安全確認をしながら、停止するか、進むかを選択します。
以上の内容は、状況が”走行可能”な場合にのみ、実行します。</comment><statement name="HANDLER"><block type="controls_if" id="z004.ll;9^q~fti^)?!)"><comment pinned="false" h="92" w="430">状況が"走行可能"の場合に、運転をおこないます。
"走行可能"以外の状況では、ここで行う運転をしません。</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?mM=Mg}D-6h5{snG_lp0"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="ZY!?rW#?Y3qh9_Lt-bue"><field name="VAR" id="U8@cqp|.-uiLjv01M=Q`">状況</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">550</field></shadow><block type="variables_get" id="_vD_l;bjG^VarKK5vlI)"><field name="VAR" id="){,=g4O_b,E/6W1l#Gn5">状況［走行可能］</field></block></value></block></value><statement name="DO0"><block type="controls_if" id="FYuE!.ow_z]Cq?/`6F!j"><mutation else="1"></mutation><comment pinned="false" h="135" w="339">安全確認します。
確認した結果により、条件判断します。
　① 危険があれば、一時停止します。
　② 安全であれば、道路の上を走ります。</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="U-]HM[#.dG6whVlA}p^."><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="@R_m^/IwDv5rH%yHXVyY"><mutation name="安全を確認する" functionid="!@WlC.M/^DB4MW8c.3u1"></mutation><comment pinned="false" h="88" w="319">安全運転を確認します。
確認した結果により、条件判断します。</comment></block></value><value name="B"><shadow type="math_number"><field name="NUM">550</field></shadow><block type="variables_get" id="vqE1yPQgU](Ogk~d-eH."><field name="VAR" id="*~ZXZs{oj!p9hJY=!cI`">安全確認の結果［危険］</field></block></value></block></value><statement name="DO0"><block type="function_call" id="-:;=BN%PL*S$rc2_CCEJ"><mutation name="一時停止する" functionid=",wA;;e0OL%Z4`mj=O=_c"></mutation><comment pinned="false" h="63" w="210">車を一時停止します。</comment></block></statement><statement name="ELSE"><block type="function_call" id="YL[@xFT!iw+[ol.0F1gh"><mutation name="道路の上を走る" functionid="ZD{VVf3tnOe+-3.eF2LY"></mutation><comment pinned="false" h="63" w="211">道路の上を走ります。</comment></block></statement></block></statement></block></statement></block><block type="function_definition" id="1Ob8vLAhY#Z?ZGuBVD]-" x="-2712" y="-666"><mutation name="準備する(車用)" functionid="CG7/LC{k*Q}?UNIGImC{"></mutation><field name="function_name">準備する(車用)</field><comment pinned="false" h="91" w="282">車用の準備です。
・各種機器の調整を行います。</comment><statement name="STACK"><block type="function_call" id="rlL=t`d}2n2003%o*{v1"><mutation name="準備する(車用)_モーターを調整する" functionid="puobE^K}cQ(sOTJqEk=U"></mutation><comment pinned="false" h="66" w="311">モーターに関する調整をします。</comment><next><block type="function_call" id=";,oOCG)JDSSHelB0DIVp"><mutation name="準備する(車用)_センサーを調整する" functionid="%/%92vteJNP~?OE/X~Mc"></mutation><comment pinned="false" h="75" w="288">各種センサーに関する調整をします。</comment><next><block type="function_call" id="U]R4~AaCwTq3J,FM$yP%"><mutation name="準備する(車用)_無線機を調整する" functionid="IpYSB41*KoK_6Ej#nH]^"></mutation><comment pinned="false" h="57" w="296">無線機に関する調整をします。</comment></block></next></block></next></block></statement></block><block type="function_definition" id="HJ;NvZ@|$)9ecAF|)4q=" x="-2165" y="-656"><mutation name="準備する(運転手用)" functionid="v@y5uip}Hz]7_@bN4YYP"></mutation><field name="function_name">準備する(運転手用)</field><comment pinned="false" h="84" w="354">運転手用の準備です。
運転手が運転で意識する事柄を整理します。</comment><statement name="STACK"><block type="function_call" id="WLSKtbjWse$~B2$:[Kfi"><mutation name="準備する(運転手用)_状況を整理する" functionid="vz~J0O@HP1%aPl5rE1*_"></mutation><comment pinned="false" h="65" w="399">運転手が把握すべき、状況について整理する。</comment><next><block type="function_call" id="Sz{!yC=cn8LMJ4TLaG_Y"><mutation name="準備段階を表示する" functionid="kq+mbx-O1t?5}B-7o:4a"><arg name="数値" id="u-@j!33R-_gBn52NZN7R" type="number"></arg></mutation><value name="u-@j!33R-_gBn52NZN7R"><shadow type="math_number" id="sQiR9{t,8MyqitScMt46"><field name="NUM">0</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="z(rW9pZ.(*kbuub*mz|B" x="-2646" y="-396"><mutation name="準備する(車用)_モーターを調整する" functionid="puobE^K}cQ(sOTJqEk=U"></mutation><field name="function_name">準備する(車用)_モーターを調整する</field><comment pinned="false" h="137" w="344">・はじめの誤動作を防止する目的で、
　左右のモーターの動きを止めます。
・道の曲がり具合に合わせたモーター出力の
　強弱を調整します。</comment><statement name="STACK"><block type="variables_set" id="*zdT1/I_D)8Sf^0Qzo+X"><field name="VAR" id="0Ao|I8nO,HrG2A-[g+^6">モーターの出力［速い］</field><comment pinned="false" h="176" w="504">道路をはみ出す際、はみ出している側のモーター出力を調整します。
※自動車の種類によって、センサーの反応がちがうため、
　数値を調整します。
　・SwitchEducation製：500～600程度
　・Kitronics製：20程度</comment><value name="VALUE"><shadow type="math_number" id="aTMg^M*)P**M?,NA]-W`"><field name="NUM">20</field></shadow></value><next><block type="variables_set" id="cvy`/OC;*V-sl:8HRK;!"><field name="VAR" id="nduy0;5,VO@.U33ea=Yg">モーターの出力［遅い］</field><comment pinned="false" h="155" w="532">道路をはみ出す際、はみ出していない側のモーター出力を調整します。
※自動車の種類によって、センサーの反応がちがうため、
　数値を調整します。
　・SwitchEducation製：0
　・Kitronics製：3程度</comment><value name="VALUE"><shadow type="math_number" id="=IWv6-hx*{j[vSg$W2#S"><field name="NUM">3</field></shadow></value><next><block type="function_call" id="IoVzFp=sOt,yKg#_%k{;"><mutation name="準備段階を表示する" functionid="kq+mbx-O1t?5}B-7o:4a"><arg name="数値" id="u-@j!33R-_gBn52NZN7R" type="number"></arg></mutation><value name="u-@j!33R-_gBn52NZN7R"><shadow type="math_number" id="3rm,n{|GC%C_el:MI44v"><field name="NUM">3</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="88O~~[J*+V*g-,uRhK*i" x="-2081" y="-404"><mutation name="準備する(運転手用)_状況を整理する" functionid="vz~J0O@HP1%aPl5rE1*_"></mutation><field name="function_name">準備する(運転手用)_状況を整理する</field><comment pinned="false" h="66" w="384">運転手が把握すべき、状況について整理する。</comment><statement name="STACK"><block type="variables_set" id="/.D)M:pz~mX6,4d$cZLx"><field name="VAR" id="4^6G|j~duKYO2nuHLad{">状況［出発可能］</field><comment pinned="false" h="96" w="605">状況のうち、”出発可能”を示すIDを決めます。
この状況は、準備が終わった段階で、まだそう今日可能にはなっていません。</comment><value name="VALUE"><shadow type="math_number" id="lAg#4.=yty](Iva[%0A8"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="b@8$jdYX}Aie]HJMzs$s"><field name="VAR" id="){,=g4O_b,E/6W1l#Gn5">状況［走行可能］</field><comment pinned="false" h="165" w="584">状況のうち、”走行可能”を示すIDを決めます。
この状況でないと、安全確認や、見守りケータイとの通信、店発見を通知される、といったことが出来なくなります。
はじめてこの状況になるのは、無線グループ版番号をABボタンで設定した直後になります。</comment><value name="VALUE"><shadow type="math_number" id="k$*:(~ZToR4w$hBOgjy("><field name="NUM">1</field></shadow></value><next><block type="variables_set" id=".!ha#f;Lm[x#uC+~i;}k"><field name="VAR" id="#`!JTjiU%rOZ+OjD@aYv">状況［走行禁止］</field><comment pinned="false" h="112" w="460">状況のうち、”走行禁止”を示すIDを決めます。
この状態は、停止した時になります。
一時停止なので、暫くすると再び”走行可能”に戻ります。</comment><value name="VALUE"><shadow type="math_number" id="@2lIf*qcx$~v84+7Pi#_"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id=":rBC18$UnnRRb.tqHmqa"><field name="VAR" id="wov+|~m0MlzYfs.MB9d2">状況［店に到着］</field><comment pinned="false" h="137" w="638">状況のうち、”店に到着”を示すIDを決めます。
この状況は、店の発見を通知されたときになります。
同乗者は繰り返し、店の発見を通知しますが、運転手は一度しか反応しません。
一度、到着を受け取り見守りケータイに通知すると、以上は繰り返し通知しません。</comment><value name="VALUE"><shadow type="math_number" id="9Rwykoq7L6u;XSG;_PK-"><field name="NUM">3</field></shadow></value><next><block type="variables_set" id="n:Je(}fp?~I=4=x[,2Gp"><field name="VAR" id="U8@cqp|.-uiLjv01M=Q`">状況</field><comment pinned="false" h="72" w="300">最初の状況を”出発可能”にします。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">3</field></shadow><block type="variables_get" id="-k|5[.`INCcdWjow|jX2"><field name="VAR" id="4^6G|j~duKYO2nuHLad{">状況［出発可能］</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="$UsBN:COiGV#Dwh[.Xc9" x="-84" y="-496"><mutation name="安全を確認する" functionid="!@WlC.M/^DB4MW8c.3u1"></mutation><field name="function_name">安全を確認する</field><comment pinned="false" h="81" w="372">安全運転を確認します。
確認した結果を "安全" か "危険" で答えます。</comment><statement name="STACK"><block type="variables_set" id="0/hnmaZDh]3?|50EJ_T;"><field name="VAR" id="dpGayXcc`vwc-]7TO).c">センサー(衝突用)の値</field><comment pinned="false" h="130" w="462">前方の障害物までの距離を測ります。
※自動車の種類により、センサーの値を得る方法が違います。
・SwitchEducation製："アナログ値を読み取る 端子[P2]"
・Kitronic製：”measure distance”</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="kitronik_move_motor_ultrasonic_measure" id="hrt?!sQAs(!YijX^j7Ka"></block></value><next><block type="controls_if" id="+(zLBqhLKra.n^w{OJ6G"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="310" w="471">危険な距離に近づいたかを条件判断します。
　・ 危険な距離であれば、危険と返事をします。
　・ そうでなければ、安全と返事をします。
※自動車の種類により、センサーの値の変化が異なります。
　よって、不等号の向きが逆になります。
　・SwitchEducation製：
　　近寄るほど、値が大きくなる。よって ”≧” とします。
　・Kitronic製：
　　近寄るほど、値が小さくなる。よって ”≦” とします。
　　障害物を補足できないなど、遠すぎると判断すると、
　　０となるので、例外処理を加えます</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="yKy@pI?uw(xc/hn1rw{("><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="ggBLI,K7n3J7,1~iH^dr"><field name="VAR" id="dpGayXcc`vwc-]7TO).c">センサー(衝突用)の値</field></block></value><value name="B"><shadow type="math_number" id="YNqE}EFkZEGOZs.2,X}P"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="?2$/doth+)-%FjJdT2Ff"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="65" w="216">"安全"と返事をします。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="%TZR%;~MB~-`TI?Y/,y,"><field name="VAR" id="s|,T[cmU$e5@~~-FMKkO">安全確認の結果［安全］</field></block></value></block></statement><value name="IF1"><block type="logic_compare" id=")-1e+=,:K]AA/I5[|Jva"><field name="OP">LTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="32BKe1}[@57sQ}+02hi%"><field name="VAR" id="dpGayXcc`vwc-]7TO).c">センサー(衝突用)の値</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">550</field></shadow><block type="variables_get" id="#whyU74%ASz^l^j2am{@"><field name="VAR" id="5J11;}@/j?%vxAAW0^{T">センサー(衝突用)_危険とみなす距離</field></block></value></block></value><statement name="DO1"><block type="function_return" id="AhpMl!zH#nN8JvYbNCrI"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="61" w="221">"危険"と返事をします。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="++:dvZ(3:NDDa~ql=T}/"><field name="VAR" id="*~ZXZs{oj!p9hJY=!cI`">安全確認の結果［危険］</field></block></value></block></statement><statement name="ELSE"><block type="function_return" id="kX0^FQCwyq7Xe5!rcgxu"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="65" w="216">"安全"と返事をします。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="P:4XWZk=ig9i}*GXIO:o"><field name="VAR" id="s|,T[cmU$e5@~~-FMKkO">安全確認の結果［安全］</field></block></value></block></statement></block></next></block></statement></block><block type="function_definition" id="s9]u.%$6HmJvTIv*hFKR" x="-720" y="-445"><mutation name="Ｕターンする" functionid="/{pU8QO$-05rjKna!:/!"></mutation><field name="function_name">Ｕターンする</field><statement name="STACK"><block type="device_pause" id="%J)b+3MzF3r+4JGg:wjT"><value name="pause"><shadow type="timePicker" id="b)(CFS8QNt`B8IsEH_2q"><field name="ms">1000</field></shadow></value><next><block type="kitronik_move_motor_spin" id="kcF5nN5%3m^Nq3A;#C8H"><field name="direction">Kitronik_Move_Motor.SpinDirections.Left</field><value name="speed"><shadow type="math_number_minmax" id="n,%]N4;0/HteF}o5-{]F"><mutation min="-Infinity" max="100" label="Speed" precision="0"></mutation><field name="SLIDER">30</field></shadow></value><next><block type="device_pause" id="xdT4*SNsV}ELxChL7ERr"><value name="pause"><shadow type="timePicker" id="Yb61fL4Tm4w0OjqOetW%"><field name="ms">690</field></shadow></value><next><block type="kitronik_move_motor_stop" id="^mb80(GXUSud:gcJRanZ"><next><block type="device_pause" id="b!RDT)`b4@Om2X{[pcA5"><value name="pause"><shadow type="timePicker" id="4i1yDVa|.s1~bF;gXD^V"><field name="ms">500</field></shadow></value><next><block type="function_call" id="xR`pz0n$w:dhrPNZ{UAG"><mutation name="走行を開始する" functionid="[_h!xEIiJEc5.oAB|i2C"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id=":{aj5eYQ@;~^.wjmNfBw" x="-2647" y="-56"><mutation name="準備する(車用)_センサーを調整する" functionid="%/%92vteJNP~?OE/X~Mc"></mutation><field name="function_name">準備する(車用)_センサーを調整する</field><comment pinned="false" h="65" w="305">各種センサーに関する調整をします。</comment><statement name="STACK"><block type="function_call" id="6_V!)CPmwcXB~{BX6h@~"><mutation name="準備する(車用)_センサーを調整する(道路用)" functionid="eXo*]M0ngmlG,w93=6p0"></mutation><comment pinned="false" h="68" w="480">道路を補足する為のセンサを調整をします。</comment><next><block type="function_call" id="Oz?fs(5{Ruw]cysM8VP7"><mutation name="準備する(車用)_センサーを調整する(衝突用)" functionid="#6|(LEg+0_#,xX/~_Val"></mutation><comment pinned="false" h="69" w="385">衝突回避する為のセンサを調整をします。</comment><next><block type="function_call" id="sIfRJj;`z*1hMoR=}ax6"><mutation name="準備段階を表示する" functionid="kq+mbx-O1t?5}B-7o:4a"><arg name="数値" id="u-@j!33R-_gBn52NZN7R" type="number"></arg></mutation><value name="u-@j!33R-_gBn52NZN7R"><shadow type="math_number" id="03f2S$`Q`DD{d*%WjtZ1"><field name="NUM">2</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="JGlq4bs2xENN5v]Zm+cw" x="0" y="0"><mutation name="一時停止する" functionid=",wA;;e0OL%Z4`mj=O=_c"></mutation><field name="function_name">一時停止する</field><comment pinned="false" h="115" w="201">車を一時停止します。
　・停止します。
　・再び走り出します。</comment><statement name="STACK"><block type="function_call" id="xsPG$fo#/1{J7xG0#n/]"><mutation name="停止する" functionid="t_LrpI#${#M~-tns}zDC"></mutation><comment pinned="false" h="63" w="153">車を停止します。</comment><next><block type="function_call" id="0?#V0A-$Gz=96cT~FC[Z"><mutation name="走行を開始する" functionid="[_h!xEIiJEc5.oAB|i2C"></mutation><comment pinned="false" h="64" w="160">走行を開始します。</comment></block></next></block></statement></block><block type="function_definition" id="_c%D0[ZfZEnF:!i`L,p{" x="574" y="-11"><mutation name="道路の上を走る" functionid="ZD{VVf3tnOe+-3.eF2LY"></mutation><field name="function_name">道路の上を走る</field><comment pinned="false" h="107" w="547">道路の上を走ります。
・車と道路の位置関係を確認します。
・位置関係によって、モーターの出力を決めて、モーターを回します。</comment><statement name="STACK"><block type="variables_set" id="@#m,lb08p$?=Q.V;E!x5"><field name="VAR" id="JG_1q,3EPK?sCzbms1h|">車の位置</field><comment pinned="false" h="63" w="196">車の位置を確認します。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="k-sTQJ=z]OSLPuJ1WxFA"><mutation name="車の位置を確認する" functionid="1sUP5b(0RjI:N)]l}|jN"></mutation></block></value><next><block type="controls_if" id="@LrBr.|r?;@P/.HiEi5M"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="138" w="522">位置関係によって、モーターの出力を決めて、モーターを回します。
・右に寄ってしまったら、右側のモーターを速く回します。
・左に寄ってしまったら、左側のモーターを速く回します。
・道路の真上にあるときは、どちらのモーターも早く回します。</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="$JCOw[%hwsP+#ZCn$NAY"><field name="OP">EQ</field><comment pinned="false" h="61" w="413">車が道路の左側に片寄っているときの条件判断です。</comment><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="epe+N.wiD$|o(]pQq+~!"><field name="VAR" id="JG_1q,3EPK?sCzbms1h|">車の位置</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">300</field></shadow><block type="variables_get" id="ZT#c{!YGX7IDyYJ{gHMY"><field name="VAR" id="%SfWmyEuDh=^e*7wB_2p">車の位置［道路より左］</field></block></value></block></value><statement name="DO0"><block type="function_call" id="37FFtt86w6vK#b9gRGXC"><mutation name="モーターを回す" functionid="Vh_:FwbN,k8:PHb:x#_%"><arg name="左側" id="g(XNGx@HTg:1cs9B*/rg" type="number"></arg><arg name="右側" id="U9n?A9j8/DZl7gXXj_xk" type="number"></arg></mutation><comment pinned="false" h="88" w="537">モーターを回します。
・片寄っている側である、左側のモーターを速く回すよう指定します。</comment><value name="g(XNGx@HTg:1cs9B*/rg"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="szOnjXweDD{z@5-zBY9_"><field name="VAR" id="0Ao|I8nO,HrG2A-[g+^6">モーターの出力［速い］</field></block></value><value name="U9n?A9j8/DZl7gXXj_xk"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="w}c#8/xYgsS5IayY-/57"><field name="VAR" id="nduy0;5,VO@.U33ea=Yg">モーターの出力［遅い］</field></block></value></block></statement><value name="IF1"><block type="logic_compare" id="g]n.u%0h20HrItsC*$:L"><field name="OP">EQ</field><comment pinned="false" h="67" w="418">車が道路の右側に片寄っているときの条件判断です。</comment><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="GmcQ~K0xOEMet*Z)-KHz"><field name="VAR" id="JG_1q,3EPK?sCzbms1h|">車の位置</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">300</field></shadow><block type="variables_get" id="S`sIru)#?kR*1tvU^kpa"><field name="VAR" id="1E#aS{rYQyVl-3AJ(p4%">車の位置［道路より右］</field></block></value></block></value><statement name="DO1"><block type="function_call" id="S*$m7!2U7N]0ktIO)saq"><mutation name="モーターを回す" functionid="Vh_:FwbN,k8:PHb:x#_%"><arg name="左側" id="g(XNGx@HTg:1cs9B*/rg" type="number"></arg><arg name="右側" id="U9n?A9j8/DZl7gXXj_xk" type="number"></arg></mutation><comment pinned="false" h="89" w="558">モーターを回します。
・片寄っている側である、右側のモーターを速く回すよう指定します。</comment><value name="g(XNGx@HTg:1cs9B*/rg"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="jJd%Ck|%Wlv_amfsqZ!V"><field name="VAR" id="nduy0;5,VO@.U33ea=Yg">モーターの出力［遅い］</field></block></value><value name="U9n?A9j8/DZl7gXXj_xk"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="JfXYSGc4PHPQDK`a~tZ/"><field name="VAR" id="0Ao|I8nO,HrG2A-[g+^6">モーターの出力［速い］</field></block></value></block></statement><statement name="ELSE"><block type="function_call" id="K#l14,;ID805SgU.!,Et"><mutation name="モーターを回す" functionid="Vh_:FwbN,k8:PHb:x#_%"><arg name="左側" id="g(XNGx@HTg:1cs9B*/rg" type="number"></arg><arg name="右側" id="U9n?A9j8/DZl7gXXj_xk" type="number"></arg></mutation><comment pinned="false" h="86" w="519">モーターを回します。
・道路の中央なので、両方のモーターを速く回すよう指定します。</comment><value name="g(XNGx@HTg:1cs9B*/rg"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="z]UA{ByK+,/m`})RT!,e"><field name="VAR" id="0Ao|I8nO,HrG2A-[g+^6">モーターの出力［速い］</field></block></value><value name="U9n?A9j8/DZl7gXXj_xk"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="Glm[+Zy6VFGV%X_f-[[y"><field name="VAR" id="0Ao|I8nO,HrG2A-[g+^6">モーターの出力［速い］</field></block></value></block></statement></block></next></block></statement></block><block type="function_definition" id=")aUwQhQM)5BNB!+o?(3U" x="-2559" y="205"><mutation name="準備する(車用)_センサーを調整する(道路用)" functionid="eXo*]M0ngmlG,w93=6p0"></mutation><field name="function_name">準備する(車用)_センサーを調整する(道路用)</field><comment pinned="false" h="69" w="361">衝突を回避する為のセンサを調整をします。</comment><statement name="STACK"><block type="variables_set" id="U]F?;8KZd@$*`4Q#e6$]"><field name="VAR" id="~R6|`flZ%gwwI56EBeg2">車の向き［まっすぐ］</field><comment pinned="false" h="68" w="614">車の向きが、道路に対して”まっすぐ”であることを示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="T3ypJjN;ywLQn{*+#]l+"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="[2yX@#i$d;v2rN9-%s5X"><field name="VAR" id="|@7OAkdZ~q7AA,`_J}zk">車の向き［曲がっている］</field><comment pinned="false" h="69" w="553">車の向きが、道路に対して”曲がっている”ことを示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="*6IN~@[U18ET7p_l_UNe"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="8/tiJPq7!P,otlbgGr:-"><field name="VAR" id="Bzqa|RJ]r}poz]T!P;)-">車の位置［道路の中央］</field><comment pinned="false" h="69" w="488">車の中心が”道路の中央”に位置することを示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="6sT4p}C-4L/5I|5JtXwP"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="?;U9fsey.4QN|0=%X`nK"><field name="VAR" id="1E#aS{rYQyVl-3AJ(p4%">車の位置［道路より右］</field><comment pinned="false" h="70" w="504">車の中心が”道路の右側”に位置することを示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="k/k6u_+jk:$q,j}hr:B$"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="7s,XDbyXRiv0yd|jQK,I"><field name="VAR" id="%SfWmyEuDh=^e*7wB_2p">車の位置［道路より左］</field><comment pinned="false" h="66" w="495">車の中心が”道路の左側”に位置することを示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="_3-gQ}n`oiz@VdC6{JDL"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id="Iroy7Rl%WTx_Xz95A:3i"><field name="VAR" id="6gU6+!vaZ.=PZ]#3C!2}">センサー(道路用)_直進とみなす差の閾値</field><comment pinned="false" h="176" w="488">・左右のセンサー値の差がいくつまでであれば、
　車の向きをまっすぐと判断するか、その許容範囲を決めます。
※自動車の種類によって、センサーの反応がちがうため、
　数値を調整します。
　・SwitchEducation製：20前後
　・Kitronics製：15前後</comment><value name="VALUE"><shadow type="math_number" id=".?2bEJ83gf_Js(Kxb]L4"><field name="NUM">15</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="=8tUiz[uCQw^FCt)GYUB" x="96" y="204"><mutation name="停止する" functionid="t_LrpI#${#M~-tns}zDC"></mutation><field name="function_name">停止する</field><comment pinned="false" h="181" w="316">車を停止します。
　・状況を"走行禁止"にします。
　・モーターを止めます。
　・運転手の表情を表示します。
　・見守りケータイに 危険を通知します
　・クラクションを鳴らします。</comment><statement name="STACK"><block type="variables_set" id="7J(gK1)s,fkE_(*LOT_3"><field name="VAR" id="U8@cqp|.-uiLjv01M=Q`">状況</field><comment pinned="false" h="64" w="239">状況を"走行禁止"にします。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="kLy}]c,Msoz}^[#XO~tJ"><field name="VAR" id="#`!JTjiU%rOZ+OjD@aYv">状況［走行禁止］</field></block></value><next><block type="kitronik_move_motor_stop" id=")eV_ebU__|U^MnSC8t1R"><next><block type="basic_show_icon" id="N5$I[Gf{i%3)1_#i:1^f"><field name="i">IconNames.Surprised</field><comment pinned="false" h="64" w="390">運転手の表情を表示します。困った顔にします。</comment><next><block type="device_play_note" id="G:tl8kEhub^~OZAa!Mx^"><comment pinned="false" h="64" w="239">クラクションを鳴らします。</comment><value name="note"><shadow type="device_note" id="yu/soWnC02g=nj^WoI8D"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="-8Q#.Cx({UUE=n!}MLYd"><field name="fraction">BeatFraction.Double</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="p.0@FwfGPF5{6lpl{chO" x="-2556" y="606"><mutation name="準備する(車用)_センサーを調整する(衝突用)" functionid="#6|(LEg+0_#,xX/~_Val"></mutation><field name="function_name">準備する(車用)_センサーを調整する(衝突用)</field><comment pinned="false" h="68" w="335">衝突回避する為のセンサを調整をします。</comment><statement name="STACK"><block type="kitronik_move_motor_ultrasonic_units" id="QIRi(HRzIZ+*wUAsV;,Z"><field name="unit">Kitronik_Move_Motor.Units.Centimeters</field><comment pinned="false" h="116" w="333">下の値の単位をcmにしています。
※Kitronik製の自動車専用ブロックです。
　ほかの自動車には使いません。</comment><next><block type="variables_set" id="}OJ+-GkBD,|DVPQb0kQS"><field name="VAR" id="5J11;}@/j?%vxAAW0^{T">センサー(衝突用)_危険とみなす距離</field><comment pinned="false" h="246" w="423">停止しなければいけない距離のセンサー値を決めます。
※自動車の種類によって、値の決め方が違います。
　・SwitchEducation製：
　　近いほど値を大きくなります。
　　10cmよりも短い距離に迫ると、誤動作します。
　・Kitronics製：５(cm)程度
　　値の単位はｃｍで、近いほど小さくなります。
　　２cmよりも短い距離に迫ると誤動作します。
　　また、遠すぎると０となるので、注意が必要です。
</comment><value name="VALUE"><shadow type="math_number" id="{Njd{{t6#H*/z`e+c@pO"><field name="NUM">5</field></shadow></value><next><block type="variables_set" id="%6JG%]}-i3_p1{lw)~hx"><field name="VAR" id="s|,T[cmU$e5@~~-FMKkO">安全確認の結果［安全］</field><comment pinned="false" h="67" w="421">安全確認の結果として、”安全”を示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="15kN1=:BUt)Xu2Z_7NJF"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="4u8u7,2$K)O[H-SrY{}B"><field name="VAR" id="*~ZXZs{oj!p9hJY=!cI`">安全確認の結果［危険］</field><comment pinned="false" h="67" w="426">安全確認の結果として、”危険”を示すIDを決めます。</comment><value name="VALUE"><shadow type="math_number" id="BUep~JSi0h{PfVz/VG/5"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="I-ljjM_tlCD,%0oUE*|6" x="685" y="481"><mutation name="車の位置を確認する" functionid="1sUP5b(0RjI:N)]l}|jN"></mutation><field name="function_name">車の位置を確認する</field><comment pinned="false" h="266" w="641">車と道路の位置関係を確認します。
・確認した結果を "道路より左" か "道路より右" か "道路の中央" で答えます。
　　・道路に対する車の向きを確認します。
　　・確認の結果によって条件判断します。
　　・車の向きが "まっすぐ" のときは、"道路の中央" と答えます。
　　・車の向きが "まっすぐ" ではないときは、センサーの反応が大きい方に片寄って
　　　いると答えます。これは、道路から外れた白色のほうが反応が大きくなり、
　　　黒いほど反応は小さくなるためです。
　　　　・左のセンサーの反応が大きい場合は "道路より左" と答えます。
　　　　・右のセンサーの反応が大きい場合は "道路より右" と答えます。</comment><statement name="STACK"><block type="controls_if" id="LQyMo@fv[lNMmdKKS0l0"><mutation else="1"></mutation><comment pinned="false" h="115" w="627">・車の向きを確認し、車の向きが "まっすぐ" のときは、"道路の中央" と答えます。
・そうではない時は、左右のセンサーの反応を比較し、
　左右どちらに片寄っているかを答えます。</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="CEJ%.!8gLj;;c-l64DL*"><field name="OP">EQ</field><comment pinned="false" h="84" w="450">道路の向きを確認します。
確認し結果が、"まっすぐ"のときの条件判断になります。</comment><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="Pe3U=wUDF4I`W^[4}o)c"><mutation name="車の向きを確認する" functionid="MuO))MpP!.2qGVpcU:*i"></mutation></block></value><value name="B"><shadow type="math_number"><field name="NUM">300</field></shadow><block type="variables_get" id="RVwHBgg(R/CA6L5F=m}v"><field name="VAR" id="~R6|`flZ%gwwI56EBeg2">車の向き［まっすぐ］</field></block></value></block></value><statement name="DO0"><block type="function_return" id="8/{2i-9)}b1V.##CN^.J"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="67" w="237">"道路の通王" と 答えます。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="ooc9y#Ei:WXHQECEf}`x"><field name="VAR" id="Bzqa|RJ]r}poz]T!P;)-">車の位置［道路の中央］</field></block></value></block></statement><statement name="ELSE"><block type="controls_if" id="Y$ZkK98+`:S~N`CRs]^2"><mutation else="1"></mutation><comment pinned="false" h="83" w="339">左右のセンサーの反応を比較し、
左右どちらに片寄っているかを答えます。</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="!*_8^(3f71}$rrasVM;3"><field name="OP">GT</field><comment pinned="false" h="64" w="343">左側に片寄っているときの条件判断です。</comment><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="G$}SO{w-V@yD]EF]l+|i"><field name="VAR" id="f7A~k~YQv|L}}zVw0KN$">センサー(道路用)の値(左)</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">300</field></shadow><block type="variables_get" id="A2r,|pkp4+Pf@8Yh:l;x"><field name="VAR" id="SqQ^~DeB8!jM:=v=S=Uw">センサー(道路用)の値(右)</field></block></value></block></value><statement name="DO0"><block type="function_return" id="OzMbz7uFD7UI6~X[feLQ"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="65" w="230">"道路より左"と答えます。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="v?eO.G]|}g_HdQ7BJ-{l"><field name="VAR" id="%SfWmyEuDh=^e*7wB_2p">車の位置［道路より左］</field></block></value></block></statement><statement name="ELSE"><block type="function_return" id="xyGqRd-3-Ke3O}FTglu`"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="66" w="224">"道路より右"と答えます。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="W*VG~}T0z[u%i7t8.2r0"><field name="VAR" id="1E#aS{rYQyVl-3AJ(p4%">車の位置［道路より右］</field></block></value></block></statement></block></statement></block></statement></block><block type="function_definition" id="S4qQ!xGgTeAP2*p-tRJo" x="90" y="519"><mutation name="走行を開始する" functionid="[_h!xEIiJEc5.oAB|i2C"></mutation><field name="function_name">走行を開始する</field><comment pinned="false" h="131" w="316">走行を開始します。
 ① 無線グループを表示します。
 ② 少し待ってから、状況を”走行可能”に
　　します。</comment><statement name="STACK"><block type="device_pause" id="$yWqNB+e}WXD)B6Y1ov7"><comment pinned="false" h="64" w="199">少し時間を置きます。</comment><value name="pause"><shadow type="timePicker" id="Lj-$_S^^qi~lo^6aPcI="><field name="ms">500</field></shadow></value><next><block type="basic_show_icon" id="UbXaDvK6oU}/3MW-a[/e"><field name="i">IconNames.Happy</field><comment pinned="false" h="64" w="390">運転手の表情を表示します。困った顔にします。</comment><next><block type="variables_set" id="l0|h6(ZZb_?cH;)pW/Nn"><field name="VAR" id="U8@cqp|.-uiLjv01M=Q`">状況</field><comment pinned="false" h="67" w="293">再び、状っ強を "走行可能" にします。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="la8n{f#]sWH*+~q~$hx@"><field name="VAR" id="){,=g4O_b,E/6W1l#Gn5">状況［走行可能］</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="P8ht)@|H;GD/2.7L~?bn" x="-2632" y="902"><mutation name="準備する(車用)_無線機を調整する" functionid="IpYSB41*KoK_6Ej#nH]^"></mutation><field name="function_name">準備する(車用)_無線機を調整する</field><comment pinned="false" h="67" w="255">無線機に関する調整をします。</comment><statement name="STACK"><block type="variables_set" id="uL4nS0_^gAfrCoFpoNbh"><field name="VAR" id="EwyM(]@DOS8wG27MR2Jp">無線のグループ</field><comment pinned="false" h="143" w="523">最初に設定する、Bluetooth無線のグループIDを決めます。
変数なので実際には、今設定している内容のコピーになります。
※実際の設定は次の行になります。
車、同乗者、見守りケータイの3者は、同じIDである必要があります。</comment><value name="VALUE"><shadow type="math_number" id="#r(z*j!Xw-7DQF^2Fcj1"><field name="NUM">1</field></shadow></value><next><block type="radio_set_group" id="dWzKnBq([vtOB4m|-!Q*"><comment pinned="false" h="66" w="403">上の行で決めたグループIDで実際に設定します。</comment><value name="ID"><shadow type="math_number_minmax"><mutation min="0" max="255" label="Id" precision="0"></mutation><field name="SLIDER">1</field></shadow><block type="variables_get" id="XDu)/16R00zf1)n]$YTh"><field name="VAR" id="EwyM(]@DOS8wG27MR2Jp">無線のグループ</field></block></value><next><block type="function_call" id="a`n79G)e}rMD7rYAHI?u"><mutation name="準備段階を表示する" functionid="kq+mbx-O1t?5}B-7o:4a"><arg name="数値" id="u-@j!33R-_gBn52NZN7R" type="number"></arg></mutation><value name="u-@j!33R-_gBn52NZN7R"><shadow type="math_number" id="OV(yttP@JBOs73%b9$]6"><field name="NUM">1</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="R*UZru.@O,:*C|N08eYy" x="799" y="1001"><mutation name="車の向きを確認する" functionid="MuO))MpP!.2qGVpcU:*i"></mutation><field name="function_name">車の向きを確認する</field><comment pinned="false" h="97" w="508">道路に対する車の向きを確認します。
・確認した結果を "まっすく" か "曲がっている" で答えます。</comment><statement name="STACK"><block type="variables_set" id="GMOoXsO`D/n;2dp19z#."><field name="VAR" id="f7A~k~YQv|L}}zVw0KN$">センサー(道路用)の値(左)</field><comment pinned="false" h="133" w="639">左側のセンサーの値を得ます。
※自動車の種類によって、値の求め方が違います。
　・SwitchEducation製："アナログ値を読み取る端子[P1]"から求めます。
　・Kitronics製：専用ブロック "[Left] linefollowing sensor value" から求めます。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="kitronik_move_motor_line_follower_read_sensor" id="AfA%~v1%,Tx^}%3[9Sr;"><field name="pinSelected">Kitronik_Move_Motor.LfSensor.Left</field></block></value><next><block type="variables_set" id="6XfE1svYsv3/(#Tn,lV]"><field name="VAR" id="SqQ^~DeB8!jM:=v=S=Uw">センサー(道路用)の値(右)</field><comment pinned="false" h="135" w="642">右側のセンサーの値を得ます。
※自動車の種類によって、値の求め方が違います。
　・SwitchEducation製："アナログ値を読み取る端子[P0]"から求めます。
　・Kitronics製：専用ブロック "[Right] linefollowing sensor value" から求めます。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="kitronik_move_motor_line_follower_read_sensor" id="p+yAM(4v^P~}37v8cP*1"><field name="pinSelected">Kitronik_Move_Motor.LfSensor.Right</field></block></value><next><block type="variables_set" id="O)EbzZs+ts8D`i!N6hk,"><field name="VAR" id="A7HxQSym8b9U#hi=.r8+">センサー(道路用)の値(差分)</field><comment pinned="false" h="66" w="305">左右のセンサーの差を得ます。</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_op3" id="mo(/cQ+VL(S^h`u;xeD/"><value name="x"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id=":reZvI*m]t#1p44rr:zg"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="N7(E9FZ=I-N/4%~K{%)h"><field name="VAR" id="f7A~k~YQv|L}}zVw0KN$">センサー(道路用)の値(左)</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Y`7Uh${phc{#@(4eb#Lp"><field name="VAR" id="SqQ^~DeB8!jM:=v=S=Uw">センサー(道路用)の値(右)</field></block></value></block></value></block></value><next><block type="controls_if" id="G8/Wer0Fupm#vCRjt$Cv"><mutation else="1"></mutation><comment pinned="false" h="114" w="373">・差分がある範囲を超えると、左右のどちらかに
　曲がっていると判定します。
・超えていなければ、まっすぐと判定します。　　　　　　　　</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="i+frdX*H]]~05uHMH!sl"><field name="OP">LT</field><comment pinned="false" h="73" w="490">差分の値が、決めた範囲を超えていないときの条件判断です。</comment><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=",u(B2.@25~A6W`GO7~@p"><field name="VAR" id="A7HxQSym8b9U#hi=.r8+">センサー(道路用)の値(差分)</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">300</field></shadow><block type="variables_get" id="y.jj%|4m^o5gt7*J2,R["><field name="VAR" id="6gU6+!vaZ.=PZ]#3C!2}">センサー(道路用)_直進とみなす差の閾値</field></block></value></block></value><statement name="DO0"><block type="function_return" id="uuaycoum`qu)iyLjtEzt"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="62" w="275">車の向きが”まっすぐ”と答えます。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="}b[OsTa|1jCG@g?NiC9M"><field name="VAR" id="~R6|`flZ%gwwI56EBeg2">車の向き［まっすぐ］</field></block></value></block></statement><statement name="ELSE"><block type="function_return" id="@gX@P{R[?l[-c4*Da7E{"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="61" w="321">車の向きが”まがっている”と答えます。</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="JFon}FSpq!]|LfUgcc6w"><field name="VAR" id="|@7OAkdZ~q7AA,`_J}zk">車の向き［曲がっている］</field></block></value></block></statement></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="{zTH0dqEnA{zNQ|O0D%b" x="-2210" y="1166"><mutation name="準備段階を表示する" functionid="kq+mbx-O1t?5}B-7o:4a"><arg name="数値" id="u-@j!33R-_gBn52NZN7R" type="number"></arg></mutation><field name="function_name">準備段階を表示する</field><comment pinned="false" h="65" w="353">設定の進み具合を数字と音で表現します。</comment><statement name="STACK"><block type="device_show_number" id="_+(PdPWGJ#3EdoCBfNa@"><value name="number"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="67EaHF;s$;ynX69/%4(d"><field name="VALUE">数値</field></block></value><next><block type="controls_if" id="__.++T^.%e2?~BcyOzlq"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="u)m}yj$.Rl/qyx=_z5Ww"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id=")cER%Yfd4nC2uc.o[K$x"><field name="VALUE">数値</field></block></value><value name="B"><shadow type="math_number" id="VNXo2$R!T3l^v|hwMBei"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="device_play_note" id="=7J}cD][cUkef{NLxnfg"><value name="note"><shadow type="device_note" id="dsZ{XfLr1F%j`2yyH(V3"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="H;Fx`ufqszQ!:G{]q^dC"><field name="fraction">BeatFraction.Double</field></shadow></value><next><block type="device_pause" id="5mxcD^pgIEL(e5?Ves{x"><value name="pause"><shadow type="timePicker" id="|Fz!Vh}_{);5EIC1Jf*J"><field name="ms">1000</field></shadow></value></block></next></block></statement><statement name="ELSE"><block type="device_play_note" id="re+,O}eTI4er=9/J7?Jc"><value name="note"><shadow type="device_note" id="mB[C5W6RK_Lyv|n87i8F"><field name="name">392</field></shadow></value><value name="duration"><shadow type="device_beat" id="5ZSklADD%4D9ck(4N~MI"><field name="fraction">BeatFraction.Half</field></shadow></value></block></statement><next><block type="device_pause" id="^4}50UY?V;p0Bpxi~Qv4"><value name="pause"><shadow type="timePicker" id="G~dnEX+j)TsEez@Dc4FH"><field name="ms">200</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="75tbJWR:qMBAuXI+Grf|" x="699" y="1503"><mutation name="モーターを回す" functionid="Vh_:FwbN,k8:PHb:x#_%"><arg name="左側" id="g(XNGx@HTg:1cs9B*/rg" type="number"></arg><arg name="右側" id="U9n?A9j8/DZl7gXXj_xk" type="number"></arg></mutation><field name="function_name">モーターを回す</field><comment pinned="false" h="162" w="751">モーターを回します。
・左右ごとに出力を”速い” か ”遅い” で指定します。
※自動車の種類によって、ブロックが違います。
　・SwitchEducation製：”アナログで出力する端子[13/15]"を使います。
　・Kitronics製：専用ブロック "[Left/Right] motor on direction [Forward] speed" を使います。</comment><statement name="STACK"><block type="kitronik_move_motor_motor_on" id="!M!XE~n6c@I4@o(g*S=^"><field name="motor">Kitronik_Move_Motor.Motors.MotorLeft</field><field name="dir">Kitronik_Move_Motor.MotorDirection.Forward</field><value name="speed"><shadow type="math_number_minmax"><mutation min="0" max="100" label="Speed" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="v]jaAMdLQ_u6K?11;;f{"><field name="VALUE">左側</field></block></value><next><block type="kitronik_move_motor_motor_on" id="K(u1aP}S(PV8%8i)?NI1"><field name="motor">Kitronik_Move_Motor.Motors.MotorRight</field><field name="dir">Kitronik_Move_Motor.MotorDirection.Forward</field><value name="speed"><shadow type="math_number_minmax"><mutation min="0" max="100" label="Speed" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="`MJ7JXnW?kWcS[}ryMHN"><field name="VALUE">右側</field></block></value></block></next></block></statement></block></xml>